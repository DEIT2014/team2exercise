


# 产品创意
## 产品名称：英语单词听写web app
## 创意
> 最初产品创意的灵感来源来自于我自己的生活，我有一个弟弟，暑假我在家的时候，他有在上英语的补习班，每天老师都要求在家把学过的单词听写一遍，所以我每天就需要在家帮弟弟听写。因此，我就想着要是有一个能够听写英语单词的web app就好了，而且单词还能够根据今天的学习内容自己来选择单词，这样我就不用每天都要帮他听写。
> 之后，我就将我的灵感与小组的成员交流，他们觉得听写也是一种很好的学习英语单词的方法，所以我们就一起完善了这个产品创意。又添加了教师根据学生的课本布置听写任务的功能，让学生能够根据教师布置的任务自行回家听写，教师还能够看到每个学生的任务听写情况。
> 在完善产品功能的时候，我们考虑到目前市面上有相当多的英语学习软件，其中有不少专门针对英语单词的学习软件。但大多数软件只有帮助学习者背诵单词的功能，专门针对单词听写的软件较少。我们小组的成员认为通过单词听写可以有效提高单词学习效率，同时还可以对自己的单词记忆情况进行监控，单词听写是一种非常好的英语学习方法。因此，我们想要开发一款专门针对单词听写的web app。
>我们认为市场上的英语学习app主要以学习者为主，即靠学习者的自觉性来保证学习质量。这样的模式对于自律性较差的学习者来说效果较差，往往三天打鱼两天晒网。因此，我们在我们的web app中加入了教师的角色，通过教师发布听写任务，学生来完成，同时学生的学习情况教师都可以查看了解。这种模式大大减少了学生偷懒的可能性，同时教师可以利用该app了解全班学生的英语单词学习情况，拓展了该app的应用范围。
>基于以上两点考虑，我们小组构想这款英语单词听写web app主要应用于学校之中，单词库收录的单词以英语课本单词为主，老师通过这款app可以在课后布置单词听写作业，学生可以通过这款app复习课堂所学单词并完成听写测试，老师可以查看全班同学的听写测试情况。
>教师布置单词听写任务时，可以任意勾选所需单词，每次发布的听写任务并不是固定的听写内容。
>学生在进行测试前可以先进行单词复习，从发音，字形，字意三个方面复习单词。听写测试的内容为听音默写，同时要对该单词的汉语含义进行判断。
>我们还考虑是否可能给每个用户建立一个单词记录本，收录所有听写过的单词及易错词，方便用户复习整理。
##针对人群
>这款单词听写web app的目标用户暂时定为小学六年级学生以及教师。因为我们现在web app的单词量只有小学六年级课本的一部分单词。

## 需求
>我们的英语听写单词web app主要包括登录注册功能、教师布置任务功能，教师查看以往任务完成情况功能，以及学生复习单词功能、学生听写单词功能和学生查看听写结果功能等。
> 首先，听写也是一种学习英语的很好方式，学生能够准确的将单词记住，所以我们选择了让学生听写的功能，而不是现在市场上大部分的应用单词学习软件采用的选择题的方式。
> 其次，我们增加了教师布置任务的功能，教师可以根据今天上课的学习情况给学生布置任务，监督学生完成今天的英语单词学习任务。而且教师布置任务的时候可以选择要布置的单词，这样教师就能根据自己对全班同学的了解情况进行布置。另外，教师也能够查看听写学生以往的完成情况，了解学生掌握情况。
> 所以，总的来说我们的web app对于英语教师来说是一个很好的辅助工具。

## 设计的功能列表以及其完成情况

 设计的功能|承担该功能的组员|任务完成度
 --|--|--
  登录、注册功能|姜慧敏、王冰倩、潘晨煜|已完成
  教师端发布听写任务功能|王冰倩、潘晨煜|已完成
  教师首页显示功能|潘晨煜|已完成
  教师端详细查看任务完成情况功能|姜慧敏、潘晨煜|已完成
  学生首页显示待完成任务功能|王冰倩|已完成
  学生端复习单词功能|王冰倩|已完成
  学生端测试结果显示功能|王冰倩|已完成
  学生端听写测试功能|姜慧敏|待完成

## 原型展示

![new mockup 1](https://cloud.githubusercontent.com/assets/22018510/21743051/9cceeef8-d535-11e6-8f11-6ae195d2e3b2.png)

![new mockup 2](https://cloud.githubusercontent.com/assets/22018510/21743052/9cde3e1c-d535-11e6-83ca-d553dfca8717.png)

![new mockup 3](https://cloud.githubusercontent.com/assets/22018510/21743053/9ce2f38a-d535-11e6-8ccb-5342d3753d07.png)

![new mockup 4](https://cloud.githubusercontent.com/assets/22018510/21743054/9cf456a2-d535-11e6-9b5b-4ae15d0ff6a2.png)

![new mockup 5](https://cloud.githubusercontent.com/assets/22018510/21743055/9d123564-d535-11e6-83ea-9ea0519aaa70.png)

![new mockup 6](https://cloud.githubusercontent.com/assets/22018510/21743056/9d1a3ab6-d535-11e6-8069-f7364e72f361.png)

![result window](https://cloud.githubusercontent.com/assets/22018510/21743057/9d2d4e3a-d535-11e6-9bd2-071f57d07a13.png)

![review](https://cloud.githubusercontent.com/assets/22018510/21743058/9d314c1a-d535-11e6-80c0-76ab2b28529b.png)

![student window1](https://cloud.githubusercontent.com/assets/22018510/21743059/9d410538-d535-11e6-895c-66c1b6eac352.png)

![test window](https://cloud.githubusercontent.com/assets/22018510/21743060/9d4195d4-d535-11e6-9dcc-59db67dd7d18.png)

![default](https://cloud.githubusercontent.com/assets/22018510/21743061/9d5540a2-d535-11e6-915a-a436d00f4dfc.png)

# 产品技术方案
> **注册功能**。先要在客户端获取到用户填写的注册信息，然后将数据写成一个JSON格式的数据，再通过request将数据POST到服务器端，同时服务器端要response，并将数据写入数据库中。在客户端获取用户注册信息的时候，需要判断：1、用户名和密码是否为空。2、两次填写的密码是否相同。满足这两个条件才会要将数据传递给服务器，而且将数据写入数据库的过程中，以学生的学号或者教师的工号为主键，如果学号或者工号数据库中已经存在，那么就显示注册失败，需要重新填写信息进行注册。注册成功之后，就会显示注册成功，并且能够跳转到登录界面。
>
> **登录功能**。是要首先在服务器端将数据库中之前的注册信息（主要包括学号或工号，密码，班级，身份）取出来，并写成JSON格式的数据，然后在客户端通过request获取数据，服务器端response。在客户端就要首先获取到用户填写的登录信息，然后用学号或工号、密码与从数据库中获取的进行比较，如果错误的话就显示错误需要重新登录，如果用户填写信息正确的话，就再次判断登录用户的身份，然后根据身份再跳转到学生界面或者教师界面。另外，需要全局变量来获取登录者的姓名，班级以及学号或工号，以供在其他页面显示使用。
>

> **教师端发布听写任务功能**。首先需要在客户端写一个request，从服务器端获取某个单元的单词数据。服务器需要从数据库中获取某个单词的数据，然后将数据写成JSON格式并且response给客户端。在客户端，首先需要定义一个全局的列表变量，将获取到的整个单元的单词放进去。然后将每个单词显示出来，并且采用input标签，type为checkbox，这样教师能够选择这次任务要布置的单词。教师选择完成之后，点击“提交”按钮，就到了“教师确认发布任务单词界面”，首先要定义一个全局的列表变量收集本次任务的单词数据，然后判断如果之前的input标签被选中就将单词的数据，添加到列表当中。然后再在界面中动态显示教师布置的任务单词。在“教师确认发布任务单词界面”中有两个按钮“确认”、“重新选择”。如果点击“重新选择”就需要跳转到之前教师选择任务单词的界面以及将收集任务单词数据的列表清空。如果选择“确认界面”，就需要在客户端将任务的单词数据写成JSON格式并且POST到服务器端，然后服务器端将数据写入数据库的表中。
>
> **教师首页显示功能**。教师首页主要显示的是学生以往完成情况，所以就需要客户端向服务器发送请求，服务器从数据库中取数据并返回给客户端，然后客户端显示数据。
>
> **教师端详细查看任务完成情况功能**。根据在教师首页选择的任务完成情况，显示详细的班级同学完成情况。首先客户端向服务器发送获取任务完成情况数据的请求，服务器从数据库中取数据，并返回给客户端，然后客户端根据教师选择情况提取所需要的数据，并动态显示在界面上。

> **学生端首页待完成任务显示功能**。客户端向服务器端发送get数据的请求，服务器端从数据库的表中提取数据，并Response给客户端。客户端接收数据之后先根据学生信息筛选出来属于该学生的待完成任务（每个任务在数据库的表中有一个字段为“status”,如果该字段值为“false”即为待完成），然后动态显示在学生的首页，并为这些任务添加链接，点击之后就可以跳转到该任务的复习界面。
>
> **学生端复习单词功能**。根据学生从首页点击的任务，复习界面显示不同的单词。首先，需要客户端向服务器端发送get数据的请求，服务器端从数据库的表中提取某次任务的单词数据，然后Response给客户端。客户端接收到数据之后再通过动态添加标签来显示任务中的所有单词，并将定义一个全局变量，存储接收到的数据，点击“测试”按钮开始测试。
> **学生端听写测试功能**。客户端利用学生端复习单词功能接收到的数据，动态显示单词以及音频，规定每一个单词自动播放三遍。然后收集用户听写的单词数据，判断是否正确，并将用户听写的单词、正确的单词以及是否正确等数据保存为JSON格式的数据，然后POST给服务器，之后服务器再将数据写进相应的表中。
> **学生端测试结果显示功能**。客户端向服务器端发送get数据的请求，服务器从数据库的相应表中提取数据。然后将数据response给客户端，客户端再讲数据动态显示出来。客户端显示数据的时候是把正确和错误的单词分开显示，所以首先要判断是单词听写是正确还是错误，而且如果错误的话，需要把学生听写的错误单词以及该单词的正确单词都要显示出来。如果听写正确，则只需要显示该单词即可。

# 我在小组中的分工
>我在小组中主要负责登录注册的客户端代码，教师端发布任务的服务器与客户端代码，学生首页显示待完成任务的服务器与客户端代码，学生端复习单词功能的服务器与客户端，学生端测试结果显示功能的服务器与客户端代码。同时也有一少部分格式的调整。
>与其他小组成员相比，我觉得我自己完成的不错。而且我觉得我们小组的每个人完成的都不错，因为我们每个人的侧重点不同，潘晨煜的主要工作是设计界面，同时也完成了一部分的功能，我和姜慧敏主要是写功能的代码，而且姜慧敏是组长，所以有的工作就需要她来做，虽然我写的功能部分的代码可以比她们两个稍微多一点，但是我们三个人的分工侧重点不同，因此我觉得我们小组每个人配合完成的都不错，而且工作量也相当。

# 我的编程实践活动
## 我的代码

```dart
//**登录功能的main.dart代码**
//*全局变量*
String studentName;
String studentID;
String teacherName;
String teacherClass;
String studentClass;
InputElement signin_userid; //登录界面的ID变量
InputElement signin_password; //登录界面的密码变量
//*main函数*
  document
      .querySelector('#SignIn_Div_Form')
      .style
      .display = "block";//在首页显示登录界面
  signin_userid = querySelector('#SignIn_UserID'); //输入用户ID
  signin_password = querySelector('#SignIn_Password'); //输入密码
  var router = new Router(useFragment: true);
  router.root..addRoute(
      name: 'signup', path: '/signup', enter: SignUp)..addRoute(
      name: 'home', path: '/', enter: (_) => null);
  querySelector('#SignUp_Btn').attributes['href'] = router.url('signup');
  router.listen();//点击“注册”按钮，跳转到注册界面
  querySelector("#SignIn_Btn").onClick.listen(SignIn);//点击“登录”按钮
//*Signup跳转函数，跳转到注册界面*
 void SignUp(RouteEvent e) {
  document
      .querySelector('#SignUp_Div_Form')
      .style
      .display = "block";//显示注册页面
  document
      .querySelector('#SignIn_Div_Form')
      .style
      .display = "none";//隐藏登录页面
}
//*用户点击“登录”之后的响应事件*
void SignIn(MouseEvent event) {
    var request = HttpRequest.getString("http://127.0.0.1:14080/userinfo").then(onSignIn);//get用户注册时候的数据
}
//*onSignIn函数*
void onSignIn(responseText) {
  var jsonString = responseText;
  var userinfo = JSON.decode(jsonString);
  var userinfolist = userinfo["Userinfo"];
  int a = 0;//用来判断用户是否已经登录成功
  for (var user in userinfolist) {
    if (user["UserID"] == signin_userid.value) {
      if (user["Password"] == signin_password.value) {
        if (user["Status"] == "stu") {
          //隐藏登录转到学生界面
          var router1 = new Router(useFragment: true);
          router1.root
            ..addRoute(
                name: 'stu_signin', path: '/stu/index', enter: StuSignIn);
          querySelector('#SignIn_Btn').attributes['href'] =
              router1.url('stu_signin');
          router1.listen();
          a = 1;//表明登录成功
          studentName = user["Username"];//表示登录学生姓名的变量
          studentClass = user["Class"];//表示登录学生班级的变量
          studentID = user["UserID"];//表示登录学生学号的变量
          querySelector("#studentClass").text = studentClass;//在学生复习页面显示学生班级
          querySelector("#studentName").text = studentName;//在学生复习页面显示学生姓名
          querySelector("#studentClass1").text = studentClass;//在学生测试结果页面显示学生班级
          querySelector("#studentName1").text = studentName;//在学生测试结果界面显示学生姓名
          querySelector("#studentClass2").text = studentClass;//在学生测试界面显示学生班级
          querySelector("#studentName2").text = studentName;//在学生测试界面显示学生姓名
        }
        else {
           //隐藏登录转到教师界面
          var router2 = new Router(useFragment: true);
          router2.root
            ..addRoute(
                name: 'tea_signin', path: '/tea/index', enter: TeaSignIn);
          querySelector('#SignIn_Btn').attributes['href'] =
              router2.url('tea_signin');
          router2.listen();
          a = 1;//表明已经登录成功
          teacherClass = user["Class"];//表示登录教师班级的变量
          teacherName = user["Username"];//表示登录教师姓名的变量
          querySelector("#teacherClass").text = teacherClass;//在教师的首页面显示班级
          querySelector("#teacherName").text = teacherName;//在教师的首页面显示教师姓名
          querySelector("#teacherClass1").text = teacherClass;//在教师确认布置任务单词界面显示班级
          querySelector("#teacherName1").text = teacherName;//在教师确认布置任务单词界面显示教师名字
          querySelector("#teacherClass2").text = teacherClass;//在教师选择布置任务单词界面显示班级
          querySelector("#teacherName2").text = teacherName;//在教师选择布置任务单词界面显示教师姓名
        }
      }
    }
  }
  if (a == 0) {
    querySelector("#SignIn_Error").text = "学号、工号或者密码错误，请重新登录";
  }
}
//*StuSignIn跳转函数，跳转到学生主页面*
void StuSignIn(RouteEvent e) {
  document
      .querySelector('#student')
      .style
      .display = "block";//显示学生主页面
  document
      .querySelector('#SignIn_Div_Form')
      .style
      .display = "none";//隐藏登录页面
}
//*TeaSignIn跳转函数，跳转到教师主页面*
void TeaSignIn(RouteEvent e) {
  document
      .querySelector('#Teacher_Div')
      .style
      .display = "block";//显示教师主页面
  document
      .querySelector('#SignIn_Div_Form')
      .style
      .display = "none";//隐藏登录首页
}
//**登录界面的CSS代码**
form{
    display:none;
}


//**注册功能的main.dart代码**
//*全局变量*
InputElement signup_username; //注册界面的用户名变量
SelectElement signup_class; //注册界面的班级变量
InputElement signup_userid; //注册界面的用户ID变量
InputElement signup_password; //注册界面的密码变量
InputElement signup_confirmpw; //注册界面确认密码的变量
//*main函数*
 signup_username = querySelector('#SignUp_Username'); //输入用户名
  signup_class = querySelector('#SignUp_Class'); //输入班级
  signup_password = querySelector('#SignUp_Password'); //输入密码
  signup_confirmpw = querySelector('#SignUp_ConfirmPW'); //确认密码
  signup_userid = querySelector("#userID"); //用户ID
  var SignUp_Stu_Btn = querySelector('#SignUp_Stu_Btn'); //学生注册按钮
  SignUp_Stu_Btn.onClick.listen(StuSignUp);
  querySelector('#SignUp_Tea_Btn').onClick.listen(TeaSignUp); //教师注册按钮
   querySelector('#SucSignUp_Btn')
    ..onClick.listen(ReturnSignIn); //注册成功界面返回登录界面按钮
//*点击学生注册按钮事件*
void StuSignUp(MouseEvent event) {
  var SignUpUserName = signup_username.value;//获取学生注册时填写的姓名值
  var SignUpClass = signup_class.value;//获取学生注册时填写的班级值
  var SignUpPassword = signup_password.value;//获取学生注册时首次填写的密码
  var SignUpConPassword = signup_confirmpw.value;//获取学生注册时再次填写的确认密码
  var SignUpUserID = signup_userid.value;//获取学生填写的学号值
    //if判断语句：用户名和密码是否为空，空时给出提示
  if (SignUpUserName == '' || SignUpPassword == '' || SignUpConPassword == '' ||
      SignUpUserID == '') {
    querySelector("#signuperror").text = "用户名、学号和密码不能为空！";
  }
     //else:对数据进行处理
  else {
     //if判断语句：密码和确认密码是否一致，不一致时给出提示（else语句在下面）
    if (signup_password.value == signup_confirmpw.value) {
      //记录注册成功学生的信息
      Map data = {
        "Username":'${SignUpUserName}',
        "Class":'${SignUpClass}',
        "Password":'${SignUpPassword}',
        "UserID":'${ SignUpUserID}'
      };
      var jsonData = JSON.encode(data);//将数据转换为JSON格式
        //创建post的request
      HttpRequest request = new HttpRequest(); //create a new XHR=XMLHttpRequest
        //创建一个事件处理器，等到request被处理好之后，返回response时调用
      request.onReadyStateChange.listen((_) {
          //if条件：状态改变
        if (request.readyState == HttpRequest.DONE &&
            (request.status == 200 || request.status == 0)) {
            //if判断语句：注册是否成功，成功跳转到另一个url处，否则给出错误提示：该用户已经注册......
          if (request.responseText == 'success') {
              //注册成功界面的router
            var router2 = new Router(useFragment: true);
            router2.root
              ..addRoute(
                  name: 'SStuSignUp',
                  path: '/stu/signup/succeed',
                  enter: SSignUp);
            querySelector('#SignUp_Stu_Btn').attributes['href'] =
                router2.url('SStuSignUp');
            router2.listen();
          }
          else {
            querySelector("#signuperror").text = "该用户已注册，请更换学号";
          }
          //end 注册是否成功的if
        }
      });
      //post data to the server
      var url = "http://127.0.0.1:14080/student_signup";
      request.open("POST", url, async: false);
      request.send(jsonData); //perform the post

    }
    //else：两次密码不同，给出提示
    else {
      querySelector("#signuperror").text = "两次输入密码不同，请重新输入！";
    }
    //end 两次密码是否一致的if
  }
  //end 用户名和密码是否为空的if
}
//*点击教师注册按钮事件*
void TeaSignUp(MouseEvent event) {
  var SignUpUserName = signup_username.value;//获取注册教师的姓名
  var SignUpClass = signup_class.value;//获取注册教师的班级
  var SignUpPassword = signup_password.value;//获取注册教师的首次输入密码
  var SignUpConPassword = signup_confirmpw.value;//获取注册教师的再次输入密码
  var SignUpUserID = signup_userid.value;//获取注册教师的工号
  //if判断语句：用户名和密码是否为空，空时给出提示
  if (SignUpUserName == '' || SignUpPassword == '' || SignUpConPassword == '' ||
      SignUpUserID == '') {
    querySelector("#signuperror").text = "用户名、工号和密码不能为空！";
  }
  //else:对数据进行处理
  else {
    //if判断语句：密码和确认密码是否一致，不一致时给出提示（else语句在下面）
    if (signup_password.value == signup_confirmpw.value) {
      //记录注册成功教师信息
      Map data = {
        "Username":'${SignUpUserName}',
        "Class":'${SignUpClass}',
        "Password":'${SignUpPassword}',
        "UserID":'${SignUpUserID}'
      };
      var jsonData = JSON.encode(data);
      //创建post的request
      HttpRequest request = new HttpRequest(); //create a new XHR=XMLHttpRequest
      //创建一个事件处理器，等到request被处理好之后，返回response时调用
      request.onReadyStateChange.listen((_) {
        //if条件：状态改变
        if (request.readyState == HttpRequest.DONE &&
            (request.status == 200 || request.status == 0)) {
          //if判断语句：注册是否成功，成功跳转到另一个url处，否则给出错误提示：该用户已经注册......
          if (request.responseText == 'success') {
            //注册成功router
            var router2 = new Router(useFragment: true);
            router2.root
              ..addRoute(
                  name: 'STeaSignUp',
                  path: '/tea/signup/succeed',
                  enter: SSignUp);
            querySelector('#SignUp_Tea_Btn').attributes['href'] =
                router2.url('STeaSignUp');
            router2.listen();
          }
          else {
            querySelector("#signuperror").text = "该用户已注册，请更换工号";
          }
          //end 注册是否成功的if
        }
      });
      //post data to the server
      var url = "http://127.0.0.1:14080/teacher_signup";
      request.open("POST", url, async: false);
      request.send(jsonData);
    }
    //else：两次密码不同，给出提示
    else {
      querySelector("#signuperror").text = "两次输入密码不同，请重新输入！";
    }
    //end 两次密码是否一致的if
  }
  //end 用户名和密码是否为空的if
}
//*SSignUp跳转函数，跳转到注册成功界面*
void SSignUp(RouteEvent e) {
  document
      .querySelector('#Background_Soe')
      .style
      .display = "block";//显示注册成功界面
  document
      .querySelector('#SignUp_Div_Form')
      .style
      .display = "none";//隐藏注册界面
}
//*注册成功界面返回登录按钮事件*
void ReturnSignIn(MouseEvent event) {
  //todo 隐藏注册界面和注册成功界面，显示登录界面
  var router = new Router(useFragment: true);
  router.root
    ..addRoute(name: 'returnSignIn', path: '', enter: returnSignIn);
  querySelector('#SucSignUp_Btn').attributes['href'] =
      router.url('returnSignIn');
  router.listen();
}
//*returnSignIn跳转函数，跳转到登录界面*
void returnSignIn(RouteEvent e) {
  document
      .querySelector('#SignIn_Div_Form')
      .style
      .display = "block";//显示登录界面
  document
      .querySelector('#Background_Soe')
      .style
      .display = "none";//隐藏注册成功界面
}


//***教师端布置新任务***
//**教师端布置新任务的main.dart代码**
//*全局变量*
var wordlist = []; //全局的单元单词变量
int tag; //标记该单词是否被教师选择为新任务中的单词
//*main函数*
 querySelector('#newTask').onClick.listen(newTask);//点击教师首页布置任务按钮
//*点击布置任务响应事件*
 void newTask(MouseEvent event) {
  var request = HttpRequest.getString("http://127.0.0.1:14080/teacherUnitWord")
      .then(onTeaWord);//向服务器端发送获取单词数据请求
  //布置任务界面router
  var router = new Router(useFragment: true);
  router.root
    ..addRoute(
        name: 'newTask',
        path: '/tea/newTask',
        enter: teaNewTask);
  querySelector('#newTask').attributes['href'] = router.url('newTask');
  router.listen();
}
//*teaNewTask调转函数，跳转到布置新任务界面*
void teaNewTask(RouteEvent e) {
  document
      .querySelector('#AssignWork_Div')
      .style
      .display = "block";//显示布置任务界面
  document
      .querySelector('#Teacher_Div')
      .style
      .display = "none";//隐藏教师首页
 }
 //*服务器端返回数据之后客户端显示单元单词*
void onTeaWord(responseText) {
  var jsonString = responseText;
  wordlist = JSON.decode(jsonString);
  for (tag = 1; tag < 21; tag++) {
    unitWord firstWord = new unitWord()//定义一个unitWord变量
      ..Unit = wordlist[tag - 1]["Unit"]
      ..English = wordlist[tag - 1]["English"]
      ..Chinese = wordlist[tag - 1]["Chinese"];
    if (firstWord.Unit == 'unit1') {//选择出第一单元的单词
      String showText = "英文：${firstWord.English} 中文：${firstWord.Chinese}";//显示单词的变量
      querySelector("#word$tag").nextNode.text = showText;//在界面上显示单词
    }
  }
}
//**教师端布置新任务server.dart代码**
//*main函数*
var myRouter = router()
 ..get('/teacherUnitWord',responseWord)//获取单元单词
//*responseWord函数，响应客户端获取数据请求*
responseWord(request)async{
  //todo 访问数据库，从单词表中获取一个单元的单词
  var wordList=[];
  var pool=new ConnectionPool(host:'localhost',port:3306,user:'root',db:'vocabulary',max:5);
  var data=await pool.query('select Unit,word,Chinese from wordlist');
  await data.forEach((row)
  {
    unitWord word=new unitWord();
    word.Unit="${row.Unit}";
    word.English="${row.word}";
    word.Chinese="${row.Chinese}";
    print(word.English);
    wordList.add(word);//将数据添加到list中
  });
  String wordListJson=encode(wordList);//将数据转换为JSON格式
  List<unitWord> word = decode(wordListJson,type:const TypeHelper<List<unitWord>>().type);
  unitWord word1 = new unitWord();
  word1 = word[0];
  print(word1.English);
  return (new Response.ok('${wordListJson}',headers: _headers));//将数据传给客户端
}
//**教师端布置新任务的CSS**
.word1{
    margin-left: 20px;
    font-size:20px;
}



//***教师确认布置任务***
//**教师却布置任务main.dart代码**
//*全局变量*
var newWordList = []; //全局的新任务单词
var wordlist = []; //全局的单元单词变量
//*main函数*
 var AssignWork_Btn = querySelector('#AssignWord_Btn');
  AssignWork_Btn.onClick.listen(SubmitWork); // 提交任务按钮
//*点击提交任务按钮事件*
void SubmitWork(MouseEvent event) {
  //todo 记录用户选择的单词数据
  //todo 隐藏当前界面，显示确认单词界面
  for (var i = 1; i < 21; i++) {//循环单元的单词
    unitWord wordString = new unitWord();
    wordString = wordlist[i - 1];
    CheckboxInputElement wordTag = querySelector("#word$i");
    //判断是否被选中以及新任务单词是否包含
    if (wordTag.checked && !(newWordList.contains(wordlist[i - 1]))) {
      newWordList.add(wordString);//被选中以及如果新任务单词中没有的话添加在新任务单词列表中
    }
  }
    //教师确认已选择单词界面router
  var router = new Router(useFragment: true);
  router.root
    ..addRoute(
        name: 'showWord',
        path: '/tea/showWord',
        enter: showWord);
  querySelector('#AssignWord_Btn').attributes['href'] =
      router.url('showWord');
  router.listen();//跳转到教师确认已选择单词界面
    //动态循环将教师以选择的单词显示出来
  TableElement table = querySelector("#choosenWord1");
  for (int num = 1; num <= newWordList.length; num++) {
    querySelector("#choosenWord$num").text =
        "中文：" + newWordList[num - 1]["Chinese"] + ' ' + "英文：" +
            newWordList[num - 1]["English"];//显示单词内容
    var newTd = new TableRowElement();//创建一个新的标签
    int i = num + 1;
    newTd.setAttribute("id", "choosenWord$i");//给新的标签添加ID
    table.children.add(newTd);//将新的标签附加到旧的后面
  }
}
//*showWord函数，跳转到显示确认已选择单词界面*
void showWord(RouteEvent e) {
  document
      .querySelector('#ConfirmWord_Div')
      .style
      .display = "block";//显示显示确认单词界面
  document
      .querySelector('#AssignWork_Div')
      .style
      .display = "none";//隐藏布置任务界面
 querySelector('#ConfirmWord_Reselect_Btn').onClick.listen(ReselectWord);//点击确认界面的“重新选择”按钮
  querySelector('#ConfirmWord_Confirm_Btn')
    ..text = '确认'
    ..onClick.listen(ConfirmWord); //确认单词以及发布作业的按钮
}
//*点击重新选择单词按钮事件*
void ReselectWord(MouseEvent event) {
  //todo 删除原来存放在json文件中的临时单词数据，
  //todo 隐藏该界面，显示布置任务界面
  var router = new Router(useFragment: true);
  router.root
    ..addRoute(
        name: 'AnewTask',
        path: '/tea/newTask',
        enter: AnewTask);  querySelector('#ConfirmWord_Reselect_Btn').attributes['href'] =
      router.url('AnewTask');
  router.listen();//隐藏确认单词界面，显示布置任务界面
  newWordList = []; //清空之前选择的单词
}
//*AnewTask跳转界面函数，跳转到布置任务界面*
void AnewTask(RouteEvent e) {
  document
      .querySelector('#AssignWork_Div')
      .style
      .display = "block";//显示布置任务界面
  document
      .querySelector('#ConfirmWord_Div')
      .style
      .display = "none";//隐藏确认单词界面
}
//*点击确认完成布置任务按钮事件*
void ConfirmWord(MouseEvent event) {
  //todo 将相应的json文件中的数据写入数据库
  //todo 显示提交单词成功界面
  var router = new Router(useFragment: true);
  router.root
    ..addRoute(
        name: 'SnewTask',
        path: '/tea/newTask/success',
        enter: SnewTask);  querySelector('#ConfirmWord_Confirm_Btn').attributes['href'] =
      router.url('SnewTask');
  router.listen();//显示任务布置成功界面
    //将数据POST到服务器端
  String jsonData = encode(newWordList);
  HttpRequest request = new HttpRequest();
  request.onReadyStateChange.listen((_) {

  });
  var url = "http://127.0.0.1:14080/teacher_writetask";
  request.open("POST", url);
  request.send(jsonData);
}
//*SnewTask跳转界面函数，跳转到成功布置任务界面。*
void SnewTask(RouteEvent e) {
  document
      .querySelector('#SucAssignWord_Div')
      .style
      .display = "block";//显示布置任务成功界面
  document
      .querySelector('#ConfirmWord_Div')
      .style
      .display = "none";//隐藏确认布置任务单词界面
  document
      .querySelector('#AssignWork_Div')
      .style
      .display = "none";//隐藏布置任务界面
  querySelector('#SucAssignWord_Btn')
    ..text = '返回主界面'
    ..onClick.listen(ReturnTeacher); //返回教师主界面的按钮
}
/// *接受用户点击返回主界面按钮的响应*
void ReturnTeacher(MouseEvent event) {
  //todo 隐藏当前界面，显示教师主界面
  var router = new Router(useFragment: true);
  router.root
    ..addRoute(
        name: 'returnTeacherIndex',
        path: '/tea/index',
        enter: returnTeacherIndex);
  querySelector('#SucAssignWord_Btn').attributes['href'] =
      router.url('returnTeacherIndex');
  router.listen();//隐藏布置任务成功界面，显示教师主界面
  newWordList = []; //将之前选择的单词清空
}
//returnTeacherIndex跳转界面函数，跳转到教师主页面
void returnTeacherIndex(RouteEvent e) {
  document
      .querySelector('#Teacher_Div')
      .style
      .display = "block";//显示教师主页面
  document
      .querySelector('#SucAssignWord_Div')
      .style
      .display = "none";//隐藏布置任务成功界面
}
//**教师确认布置任务server.dart代码**
//*main函数*
var myRouter = router()
  ..post('/teacher_writetask',responseTeaWriteTask)//传递教师提交任务的数据
//*responseTeaWriteTask函数*
responseTeaWriteTask(request) async{
  //todo 将老师布置的任务数据写入数据库的任务表中，并返回Response
  await request.readAsString().then(insertDataBaseTask);
  return (new Response.ok('',headers: _headers));
}
//*insertDataBaseTask函数*
insertDataBaseTask(data) async{
  var taskWord=JSON.decode(data);
  var myDate=new DateTime.now();//获取当前时间作为此次任务的ID
  for(int i=0;i<taskWord.length;i++)
  {
    String English;
    English=taskWord[i]['English'];
    //todo 将此次任务每个单词数据以及此次任务的ID存入数据库
    var pool=new ConnectionPool(host:'localhost',port:3306,user:'root',db:'vocabulary',max:5);
    var query=await pool.prepare('insert into assignmentcontent(assignmentID,word) values(?,?)');
    await query.execute([myDate,English]).then((result){
      print('${result.insertId}');//如果插入成功，这会是0，否则会报错
      responseText='${result.insertId}';
    }).catchError((error){
      //todo 出错的情况下，返回错误的内容
      print('$error');
      responseText=error.toString();
    });
  }
  //将此次任务的信息（任务ID，班级，任务单词个数，任务的状态（默认为false））存入数据库
  var pool=new ConnectionPool(host:'localhost',port:3306,user:'root',db:'vocabulary',max:5);
  var query=await pool.prepare('insert into assignment(assignmentID,Class,assignmentNum,status) values(?,?,?,?)');
  await query.execute([myDate,'class1',taskWord.length,"false"]).then((result){
    print('${result.insertId}');//如果插入成功，这会是0，否则会报错
    responseText='${result.insertId}';
  }).catchError((error){
    //todo 出错的情况下，返回错误的内容
    print('$error');
    responseText=error.toString();
  });
}



//***学生端首页***
//**学生端首页main.dart代码**
//*全局变量*
var unfinishedTask = []; //学生首页界面未完成任务
//*main函数*
 querySelector("#review_test").onClick.listen(reviewTest); //复习界面
//*StuSignIn跳转函数*
void StuSignIn(RouteEvent e) {
 var request = HttpRequest.getString(      "http://127.0.0.1:14080/student/index").then(onStudentIndex);//向服务器端发送获取数据的请求
      }
void onStudentIndex(responseText) {
  var jsonString = responseText;
  var studentTask = JSON.decode(jsonString);
  Element toAddA = querySelector("#assignment");
  int j = 0;
  for (var i = 1; i <= (studentTask.length); i++) {
    if (studentTask[i - 1]["Class"] == studentClass) {//判断待完成任务是否是登录学生的任务
      String unfished;
      unfished = studentTask[i - 1]["assignmentID"];//获取待完成任务ID
      if (!(unfinishedTask.contains(unfished))) {
        unfinishedTask.add(unfished);
        //动态添加a标签显示待完成任务
        Element toadd = querySelector("#assignment$j");
        toadd.text = unfinishedTask[j];
        if (j <= ((studentTask.length) / 2) + 1) {
          var newA = new Element.a();
          int m = j + 1;
          newA.setAttribute("id", "assignment$m");
          newA.setAttribute("class", "assignment");
          toAddA.children.add(newA);
          j++;
        }
      }
    }
  }
  querySelector("#assignment0").onClick.listen(studentTest0);//点击第一个待完成任务事件
querySelector("#assignment1").onClick.listen(studentTest1);//点击第二个待完成任务事件
querySelector("#assignment2").onClick.listen(studentTest2);
//点击第三个待完成任务事件
querySelector("#assignment3").onClick.listen(studentTest3);
//点击第四个待完成任务事件
querySelector("#assignment4").onClick.listen(studentTest4);
//点击第五个待完成任务事件
querySelector("#assignment5").onClick.listen(studentTest5);
//点击第六个待完成任务事件
}
//**学生端首页server.dart代码**
//*main函数*
 var myRouter = router()
 ..get('/student/index', responseStu);
//*responseStu函数*
responseStu(request)async
{//todo 访问数据库，获取登录学生的待完成任务数据,并返回给客户端
  List studentTask = new List();//存放任务信息
  //从数据库中提取数据
  var pool=new ConnectionPool(host:'localhost',port:3306,user:'root',db:'vocabulary',max:5);
  var data=await pool.query('select assignmentID,Class,status from assignment ');
  await data.forEach((row){
print(row);
Assignment assignment=new Assignment();
assignment.assignmentID="${row.assignmentID}";//赋值
assignment.Class="${row.Class}";//赋值
if("${row.status}"=="false"){
studentTask.add(assignment);//如果该任务的状态是“false”，添加到要显示的内容中
  }
});
String taskJson=encode(studentTask);
return (new Response.ok(taskJson,headers: _headers));//response
}
//**学生端首页的CSS**
.assignment{
    border: 0px;
    padding-left: 20px;
    padding-right: 20px;
    font-size:18px;
}



//***学生复习界面***
//**学生复习界面的main.dart代码**
//*studentTest0函数，点击待完成任务1事件*
void studentTest0(MouseEvent event) {
  var router = new Router(useFragment: true);
  router.root
    ..addRoute(
        name: 'StuTest',
        path: '/stu/test',
        enter: StuTest0);
  querySelector('#assignment0').attributes['href'] =
      router.url('StuTest');
  router.listen();//调转到复习界面
}
//*studentTest1函数，点击待完成任务2事件*
void studentTest1(MouseEvent event) {
  var router = new Router(useFragment: true);
  router.root
    ..addRoute(
        name: 'StuTest',
        path: '/stu/test',
        enter: StuTest1);
  querySelector('#assignment1').attributes['href'] =
      router.url('StuTest');
  router.listen();//调转到复习界面
}
//*studentTest2函数，点击待完成任务3事件*
void studentTest2(MouseEvent event) {
  var router = new Router(useFragment: true);
  router.root
    ..addRoute(
        name: 'StuTest',
        path: '/stu/test',
        enter: StuTest2);
  querySelector('#assignment2').attributes['href'] =
      router.url('StuTest');
  router.listen();//调转到复习界面
}
//*studentTest3函数，点击待完成任务4事件*
void studentTest3(MouseEvent event) {
  var router = new Router(useFragment: true);
  router.root
    ..addRoute(
        name: 'StuTest',
        path: '/stu/test',
        enter: StuTest3);
  querySelector('#assignment3').attributes['href'] =
      router.url('StuTest');
  router.listen();//调转到复习界面
}
//*studentTest4函数，点击待完成任务5事件*
void studentTest4(MouseEvent event) {
  var router = new Router(useFragment: true);
  router.root
    ..addRoute(
        name: 'StuTest',
        path: '/stu/test',
        enter: StuTest4);
  querySelector('#assignment4').attributes['href'] =
      router.url('StuTest');
  router.listen();//调转到复习界面
}
//*studentTest5函数，点击待完成任务6事件*
void studentTest5(MouseEvent event) {
  var router = new Router(useFragment: true);
  router.root
    ..addRoute(
        name: 'StuTest',
        path: '/stu/test',
        enter: StuTest5);
  querySelector('#assignment5').attributes['href'] =
      router.url('StuTest');
  router.listen();//调转到复习界面
}
//*StuTest0跳转界面函数，调转到复习界面*
void StuTest0(RouteEvent e) {
  document
      .querySelector('#student')
      .style
      .display = "none";//隐藏学生首页
  document
      .querySelector('#review')
      .style
      .display = "block";//显示复习界面
  var request = HttpRequest.getString("http://127.0.0.1:14080/review").then(
  ontaskWord0);//向服务器端发送获取数据的请求
}
//*StuTest1跳转界面函数，调转到复习界面*
void StuTest1(RouteEvent e) {
  document
      .querySelector('#student')
      .style
      .display = "none";//隐藏学生首页
  document
      .querySelector('#review')
      .style
      .display = "block";//显示复习界面
  var request = HttpRequest.getString("http://127.0.0.1:14080/review").then(
      ontaskWord1);//向服务器端发送获取数据的请求
}
//*StuTest2跳转界面函数，调转到复习界面*
void StuTest2(RouteEvent e) {
  document
      .querySelector('#student')
      .style
      .display = "none";//隐藏学生首页
  document
      .querySelector('#review')
      .style
      .display = "block";//显示复习界面
  var request = HttpRequest.getString("http://127.0.0.1:14080/review").then(
      ontaskWord2);//向服务器端发送获取数据的请求
}
//*StuTest3跳转界面函数，调转到复习界面*
void StuTest3(RouteEvent e) {
  document
      .querySelector('#student')
      .style
      .display = "none";//隐藏学生首页
  document
      .querySelector('#review')
      .style
      .display = "block";//显示复习界面
  var request = HttpRequest.getString("http://127.0.0.1:14080/review").then(
      ontaskWord3);//向服务器端发送获取数据的请求
}
//*StuTest4跳转界面函数，调转到复习界面*
void StuTest4(RouteEvent e) {
  document
      .querySelector('#student')
      .style
      .display = "none";//隐藏学生首页
  document
      .querySelector('#review')
      .style
      .display = "block";//显示复习界面
  var request = HttpRequest.getString("http://127.0.0.1:14080/review").then(
      ontaskWord4);//向服务器端发送获取数据的请求
}
//*StuTest5跳转界面函数，调转到复习界面*
void StuTest5(RouteEvent e) {
  document
      .querySelector('#student')
      .style
      .display = "none";//隐藏学生首页
  document
      .querySelector('#review')
      .style
      .display = "block";//显示复习界面
  var request = HttpRequest.getString("http://127.0.0.1:14080/review").then(
      ontaskWord5);//向服务器端发送获取数据的请求
}
//*OntaskWord0函数，处理并显示获取到的数据*
void ontaskWord0(responseText) {
  var jsonString = responseText;
  var taskWord = JSON.decode(jsonString);
  Assignment assignment = new Assignment();
  int i = 0;
  //动态创建div显示被选择任务的单词数据
  for (Map x in taskWord) {
    if (x["assignmentID"] == unfinishedTask[0]) {
      querySelector("#review_word$i").text = x["word"];
      DivElement toAdd = querySelector("#review_word$i");
      DivElement newDiv = new DivElement();
      int j = i + 1;
      newDiv.setAttribute("id", "review_word$j");
      toAdd.children.add(newDiv);
      i++;
    }
  }
}
//*OntaskWord1函数，处理并显示获取到的数据*
void ontaskWord1(responseText) {
  var jsonString = responseText;
  var taskWord = JSON.decode(jsonString);
  Assignment assignment = new Assignment();
  int i = 0;
  //动态创建div显示被选择任务的单词数据
  for (Map x in taskWord) {
    if (x["assignmentID"] == unfinishedTask[1]) {
      querySelector("#review_word$i").text = x["word"];
      DivElement toAdd = querySelector("#review_word$i");
      DivElement newDiv = new DivElement();
      int j = i + 1;
      newDiv.setAttribute("id", "review_word$j");
      toAdd.children.add(newDiv);
      i++;
    }
  }
}
//*OntaskWord2函数，处理并显示获取到的数据*
void ontaskWord2(responseText) {
  var jsonString = responseText;
  var taskWord = JSON.decode(jsonString);
  Assignment assignment = new Assignment();
  int i = 0;
  //动态创建div显示被选择任务的单词数据
  for (Map x in taskWord) {
    if (x["assignmentID"] == unfinishedTask[2]) {
      querySelector("#review_word$i").text = x["word"];
      DivElement toAdd = querySelector("#review_word$i");
      DivElement newDiv = new DivElement();
      int j = i + 1;
      newDiv.setAttribute("id", "review_word$j");
      toAdd.children.add(newDiv);
      i++;
    }
  }
}
//*OntaskWord3函数，处理并显示获取到的数据*
void ontaskWord3(responseText) {
  var jsonString = responseText;
  var taskWord = JSON.decode(jsonString);
  Assignment assignment = new Assignment();
  int i = 0;
  //动态创建div显示被选择任务的单词数据
  for (Map x in taskWord) {
    if (x["assignmentID"] == unfinishedTask[3]) {
      querySelector("#review_word$i").text = x["word"];
      DivElement toAdd = querySelector("#review_word$i");
      DivElement newDiv = new DivElement();
      int j = i + 1;
      newDiv.setAttribute("id", "review_word$j");
      toAdd.children.add(newDiv);
      i++;
    }
  }
}
//*OntaskWord4函数，处理并显示获取到的数据*
void ontaskWord4(responseText) {
  var jsonString = responseText;
  var taskWord = JSON.decode(jsonString);
  Assignment assignment = new Assignment();
  int i = 0;
  //动态创建div显示被选择任务的单词数据
  for (Map x in taskWord) {
    if (x["assignmentID"] == unfinishedTask[4]) {
      querySelector("#review_word$i").text = x["word"];
      DivElement toAdd = querySelector("#review_word$i");
      DivElement newDiv = new DivElement();
      int j = i + 1;
      newDiv.setAttribute("id", "review_word$j");
      toAdd.children.add(newDiv);
      i++;
    }
  }
}
//*OntaskWord5函数，处理并显示获取到的数据*
void ontaskWord5(responseText) {
  var jsonString = responseText;
  var taskWord = JSON.decode(jsonString);
  Assignment assignment = new Assignment();
  int i = 0;
  //动态创建div显示被选择任务的单词数据
  for (Map x in taskWord) {
    if (x["assignmentID"] == unfinishedTask[5]) {
      querySelector("#review_word$i").text = x["word"];
      DivElement toAdd = querySelector("#review_word$i");
      DivElement newDiv = new DivElement();
      int j = i + 1;
      newDiv.setAttribute("id", "review_word$j");
      toAdd.children.add(newDiv);
      i++;
    }
  }
}
//*reviewTest函数，点击复习界面的“测试”按钮事件*
void reviewTest(MouseEvent event) {
  var router = new Router(useFragment: true);
  router.root
    ..addRoute(
        name: 'StuReviewTest',
        path: '/stu/review/test',
        enter: StuReviewTest);
  querySelector('#review_test').attributes['href'] =
      router.url('StuReviewTest');
  router.listen();//跳转到测试界面
}
//StuReviewTest跳转函数，跳转到学生测试界面
void StuReviewTest(RouteEvent e) {
  document
      .querySelector('#review')
      .style
      .display = "none";//隐藏复习界面
  document
      .querySelector('#test')
      .style
      .display = "block";//显示测试界面
  querySelector("#test_submit").onClick.listen(testSubmit);//测试界面中点击提交按钮事件
}
//**学生复习界面的server.dart代码**
//*main函数*
 var myRouter = router()
 ..get('/review', responseReview);

//*responseReview函数*
responseReview(request)async{
//todo 访问数据库，获取任务中的单词，然后返回给客户端
  List taskWord = new List();//存放任务信息
  //访问数据库获取数据
  var pool=new ConnectionPool(host:'localhost',port:3306,user:'root',db:'vocabulary',max:5);
  var data=await pool.query('select assignmentID,word from assignmentcontent');
  await data.forEach((row){
    Assignment assignment=new Assignment();
    assignment.assignmentID="${row.assignmentID}";
    assignment.word="${row.word}";
    taskWord.add(assignment);
  });
  String taskWordJson=encode(taskWord);
  return (new Response.ok(taskWordJson,headers: _headers));//将数据返回客户端
}



//***学生完成测试结果界面***
//**学生完成测试结果界面的main.dart代码**
//*testSubmit函数，学生点击提交测试按钮事件*
void testSubmit(MouseEvent event) {
  var request = HttpRequest.getString("http://127.0.0.1:14080/result").then(
      ontestResult);//向服务器端发获取测试结果数据请求
  var router = new Router(useFragment: true);
  router.root
    ..addRoute(
        name: 'StuTestSubmit',
        path: '/stu/test/submit',
        enter: StuTestSubmit);
  querySelector('#test_submit').attributes['href'] =
      router.url('StuTestSubmit');
  router.listen();//跳转到测试结果界面

}
//*ontestResult函数*
void ontestResult(responseText) {
//将获取到的数据整理，然后在界面上显示
  var jsonString = responseText;
  var testResultList = JSON.decode(jsonString);
  testResult testResult1 = new testResult();
  int right = 0;
  int wrong = 0;
  for (Map x in testResultList) {
    if ((x["userID"] == studentID) &&
        (x["assignmentID"] == unfinishedTask[0])) {
        //在界面上通过动态添加DIV显示错误的单词
      if (x["Result"] == "错误") {
        querySelector("#result_wrong_word$wrong").text = "正确单词：" + x["word"];
        querySelector("#result_wrong$wrong").text = "你的单词" + x["wordResult"];
        DivElement toAdd = querySelector("#result_wrong$wrong");
        DivElement newDiv1 = new DivElement();
        DivElement newDiv2 = new DivElement();
        int j = wrong + 1;
        newDiv1.setAttribute("id", "result_wrong$j");
        newDiv2.setAttribute("id", "result_wrong_word$j");
        toAdd.children.add(newDiv2);
        toAdd.children.add(newDiv1);
        wrong++;
      }
      //在界面上通过动态添加DIV显示正确的单词
      else {
        querySelector("#result_right$right").text = x["word"];
        DivElement toAdd = querySelector("#result_right$right");
        DivElement newDiv = new DivElement();
        int i = right + 1;
        newDiv.setAttribute("id", "result_right$i");
        toAdd.children.add(newDiv);
        right++;
      }
    }
  }
}
//*StuTestSubmit跳转界面函数，跳转到测试结果界面*
void StuTestSubmit(RouteEvent e) {
  document
      .querySelector('#test')
      .style
      .display = "none";//隐藏测试界面
  document
      .querySelector('#review')
      .style
      .display = "none";//隐藏复习界面
  document
      .querySelector('#result')
      .style
      .display = "block";//显示结果界面
  querySelector('#result_return')
    ..text = '返回主页'
    ..onClick.listen(result_return);//点击由测试结果界面返回学生主页
}
//*result_return函数，在测试结果界面点击“返回主页”按钮事件*
void result_return(MouseEvent event) {
  //todo 用户点击按钮返回主页的响应工作，返回到学生首页，并隐藏当前界面。
  var router = new Router(useFragment: true);
  router.root
    ..addRoute(
        name: 'returnStuIndex', path: '', enter: returnStuIndex); //跳转到学生首页
  querySelector('#result_return').attributes['href'] =
      router.url('returnStuIndex');
  router.listen();
}
//*returnStuIndex跳转函数，跳转到学生首页*
void returnStuIndex(RouteEvent e) {
  document
      .querySelector('#student')
      .style
      .display = "block";//显示学生首页
  document
      .querySelector('#result')
      .style
      .display = "none";//隐藏测试结果界面
}
//**学生完成测试结果界面的server.dart代码**
//*main函数*
 var myRouter = router()
    ..get('/result',responseResult);//获取结果
//*responseResult函数*
responseResult(request)async
{//todo 访问数据库，从已完成任务表中获取登录学生本次测试任务结果的数据,并返回给客户端
  List testResultList = new List();//存放任务信息
  //访问数据库，并获取数据
  var pool=new ConnectionPool(host:'localhost',port:3306,user:'root',db:'vocabulary',max:5);
  var data=await pool.query('select userID,assignmentID,word,wordResult,Result from testResult');
  await data.forEach((row){
testResult testResult1=new testResult();
testResult1.userID="${row.userID}";
testResult1.assignmentID="${row.assignmentID}";
testResult1.word="${row.word}";
testResult1.wordResult="${row.wordResult}";
testResult1.Result ="${row.Result}";
testResultList.add(testResult1);
});
String testResultJson=encode(testResultList);
return (new Response.ok(testResultJson,headers: _headers));//将数据返回给客户端
}



```

## 我的活动量化
> 活动量化数据截止到2017-1-7,17:30.
![commits](https://cloud.githubusercontent.com/assets/22018510/21742807/0ab1c2c4-d531-11e6-9294-f8958b1306eb.png)

![issure](https://cloud.githubusercontent.com/assets/22018510/21742815/40f53b5e-d531-11e6-8980-c8b75150bfd9.png)
>  **王冰倩/10140340148/35 commits / 2524 ++ / 791 --/6 issues/**

## 我的issue活动
>
![issure1](https://cloud.githubusercontent.com/assets/22018510/21742833/a1148a08-d531-11e6-92cb-874120bfb071.png)

![issure2](https://cloud.githubusercontent.com/assets/22018510/21742834/a1187fb4-d531-11e6-852b-d8ac29c99619.png)

![issure3](https://cloud.githubusercontent.com/assets/22018510/21742836/a12c88ec-d531-11e6-9c0d-7996bbf71b3e.png)

![issure4](https://cloud.githubusercontent.com/assets/22018510/21742835/a125d880-d531-11e6-9f55-d42596f86cc0.png)

![issure5](https://cloud.githubusercontent.com/assets/22018510/21742837/a19dcdfe-d531-11e6-97a1-89734961f9e8.png)

![issure6](https://cloud.githubusercontent.com/assets/22018510/21742838/a1f16388-d531-11e6-85f9-db1a7b0fb1f3.png)


# 我的自评
> 我觉得在此次项目中，我完成的整体来说还是不错的，自己的每个功能都尽力完成了。在这次项目的过程中，遇到了一些困难，而且都能够在老师和同学的帮助下，一个个的解决了，所以感觉很不错。同时，我也觉得自己虽然把功能实现出来了，但是其实自己实现的方法可能不是比较好的，我的实现方法都是处于自己现在的水平写出来的，所以应该比较繁琐，所以，我写出来的代码其实还是很有必要再进行改进的。

> 目前项目的未完成功能主要就是学生听写功能。对于听写功能的主要难点是怎么正确播放音频以及控制音频的播放状态。我觉得这部分如果每天8小时的话，我需要三天，因为我对于音频这一部分的了解不太多，所以需要查阅文档以及查找相关案例。另外，我们的项目还有一个待完善的部分就是每个页面的显示部分，我们现在的显示只是简单的显示，并没有太多的样式，所以这一部分也需要完成，大概需要两天。其次，我之前写的一些代码很啰嗦，不够清晰，所以我还想要再查阅一些资料，然后在将代码简单化一点，这部分工作应该需要5天。所以总共再需要10天，3天写学生听写功能，5天修改之前的代码，2天调CSS样式。所以如果再给我10天，我应该能够做完自己的部分。
